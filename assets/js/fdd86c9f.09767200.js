"use strict";(self.webpackChunkiota_wiki=self.webpackChunkiota_wiki||[]).push([[46850],{90205:function(e,t,n){n.r(t),n.d(t,{assets:function(){return l},contentTitle:function(){return s},default:function(){return h},frontMatter:function(){return c},metadata:function(){return u},toc:function(){return p}});var i=n(87462),o=n(63366),r=(n(67294),n(3905)),a=["components"],c={image:"/img/integration-services/logo/integration_services.png",description:"This section introduces the authentication schema used in the Integration Services.",keywords:["how to","authentication","jwt","nonce","not-authenticated",401,"explanation"]},s="Concept",u={unversionedId:"basics/authentication/concept",id:"basics/authentication/concept",title:"Concept",description:"This section introduces the authentication schema used in the Integration Services.",source:"@site/content/build/integration-services/production/documentation/docs/basics/authentication/concept.md",sourceDirName:"basics/authentication",slug:"/basics/authentication/concept",permalink:"/integration-services/basics/authentication/concept",draft:!1,editUrl:"https://github.com/iotaledger/integration-services/edit/develop/documentation/content/build/integration-services/production/documentation/docs/basics/authentication/concept.md",tags:[],version:"current",frontMatter:{image:"/img/integration-services/logo/integration_services.png",description:"This section introduces the authentication schema used in the Integration Services.",keywords:["how to","authentication","jwt","nonce","not-authenticated","401","explanation"]},sidebar:"docs",previous:{title:"Local Setup",permalink:"/integration-services/getting_started/installation/docker_compose_setup"},next:{title:"Node.js",permalink:"/integration-services/basics/authentication/example_node"}},l={},p=[{value:"Authentication Workflow",id:"authentication-workflow",level:2},{value:"1. Request a Nonce",id:"1-request-a-nonce",level:3},{value:"2. Hash the Nonce",id:"2-hash-the-nonce",level:3},{value:"3. Sign the Hashed Nonce",id:"3-sign-the-hashed-nonce",level:3},{value:"4. Request the JWT",id:"4-request-the-jwt",level:3},{value:"5. Use the JWT in a Header",id:"5-use-the-jwt-in-a-header",level:3},{value:"Examples",id:"examples",level:2}],d={toc:p};function h(e){var t=e.components,n=(0,o.Z)(e,a);return(0,r.kt)("wrapper",(0,i.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"concept"},"Concept"),(0,r.kt)("p",null,"The Integration Services API uses JSON Web Tokens (",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/JSON_Web_Token"},"JWTs"),") as a secure way to authenticate yourself. First, you must sign a nonce (number only used once) generated by the API with your secret key to obtain a JWT. Afterwards, the API verifies the signed nonce and returns a JWT."),(0,r.kt)("h2",{id:"authentication-workflow"},"Authentication Workflow"),(0,r.kt)("h3",{id:"1-request-a-nonce"},"1. Request a Nonce"),(0,r.kt)("p",null,"First, you must request the nonce via a get request to the endpoint. Provide the identity id to authenticate in the URL. You can find more information in the ",(0,r.kt)("a",{parentName:"p",href:"https://wiki.iota.org/integration-services/api_reference#authenticationprove-ownershipid"},"API Reference"),"."),(0,r.kt)("p",null,"GET ",(0,r.kt)("inlineCode",{parentName:"p"},"/authentication/prove-ownership/<identity-id>")),(0,r.kt)("p",null,"JSON response body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "nonce": "748fd25be77773dbce248779e4982b6759f84071"\n}\n')),(0,r.kt)("h3",{id:"2-hash-the-nonce"},"2. Hash the Nonce"),(0,r.kt)("p",null,"Once you have received your nonce, you should hash it using ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/SHA-2"},"SHA-256")," and encode it to hexadecimal to sign it afterwards."),(0,r.kt)("h3",{id:"3-sign-the-hashed-nonce"},"3. Sign the Hashed Nonce"),(0,r.kt)("p",null,"You can now sign the hashed nonce with your secret key. Your secret key is encoded in Base58 and needs to be decoded to hexadecimal.\nYou can sign your hashed nonce with your decoded secret key using the ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/EdDSA#Ed25519"},"Ed25519")," algorithm. Make sure that the signed nonce is in hexadecimal."),(0,r.kt)("h3",{id:"4-request-the-jwt"},"4. Request the JWT"),(0,r.kt)("p",null,"You can request your JWT using the ",(0,r.kt)("inlineCode",{parentName:"p"},"/authentication/prove-ownership/<identity-id>")," endpoint. It is the same endpoint as in the first step, but it uses the POST method instead of GET. You should add your signed nonce in the request body. You can find more information in the ",(0,r.kt)("a",{parentName:"p",href:"https://wiki.iota.org/integration-services/api_reference#authenticationprove-ownershipid"},"API Reference"),"."),(0,r.kt)("p",null,"POST ",(0,r.kt)("inlineCode",{parentName:"p"},"/authentication/prove-ownership/<identity-id>")),(0,r.kt)("p",null,"JSON request body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "signedNonce": "9606885340235e37d43..."\n}\n')),(0,r.kt)("p",null,"JSON response body:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jwt": "eyJhbGciOiJIUzI1NiI..."\n}\n')),(0,r.kt)("h3",{id:"5-use-the-jwt-in-a-header"},"5. Use the JWT in a Header"),(0,r.kt)("p",null,"For all following requests to endpoints protected by authentication use your JWT in the ",(0,r.kt)("inlineCode",{parentName:"p"},"Authentication")," header with the prefix Bearer: ",(0,r.kt)("inlineCode",{parentName:"p"},"Authentication: Bearer eyJhbGciOiJIUzI1NiI...")),(0,r.kt)("h2",{id:"examples"},"Examples"),(0,r.kt)("p",null,"We provide examples of this workflow in the following languages:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"/integration-services/basics/authentication/example_node"},"Node")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"/integration-services/basics/authentication/example_is_sdk"},"Iota-is-sdk (Node client)"))))}h.isMDXComponent=!0},3905:function(e,t,n){n.d(t,{Zo:function(){return l},kt:function(){return h}});var i=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=i.createContext({}),u=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},l=function(e){var t=u(e.components);return i.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=u(n),h=o,m=d["".concat(s,".").concat(h)]||d[h]||p[h]||r;return n?i.createElement(m,a(a({ref:t},l),{},{components:n})):i.createElement(m,a({ref:t},l))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,a=new Array(r);a[0]=d;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:o,a[1]=c;for(var u=2;u<r;u++)a[u]=n[u];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);